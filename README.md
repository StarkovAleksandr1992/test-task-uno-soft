# Тестовое задание на позицию Java Junior Developer в Уно-Софт

## Исполнитель

**Александр Александрович Старков**, [GitHub профиль](https://github.com/StarkovAleksandr1992).

## Описание задачи

Задача описана [здесь](https://github.com/PeacockTeam/new-job/blob/master/lng-java.md) и связана с обработкой разрозненных наборов данных.
Для её решения необходимо использовать систему непересекающихся множеств. Эффективную обработку данных можно обеспечить
с помощью Stream API в Java.

### Порядок решения

1. Чтение данных из файла:

* Программа считывает входные данные из тестового файла, используя Stream API для обработки строк. В процессе чтения
  применяется фильтр для отсеивания невалидных строк, основываясь на предикате, обеспечивающий корректность данных.
  Для удаления повторяющихся строк используется метод distinct(), что гарантирует уникальность обрабатываемых элементов.

2. Инициализация и работа со структурой UnionFind:

* Реализуется структура данных UnionFind для эффективной группировки элементов. Логика программы объединяет
  эквивалентные данные из столбцов файла в группы, основываясь на
  определённых критериях эквивалентности. После этого каждая группа сортируется для упорядочивания элементов в нужном
  формате.

3. Запись сгруппированных и отсортированных данных в файл:

* После завершения процесса группировки и сортировки данные передаются на запись в выходной файл.

### Оптимизации

1. На первом этапе данные из тестового файла обрабатывались как строки. Например, строка "79942968583" в Java
   представлена объектом класса `String`. Внутри строки хранится массив символов (`char[]`), где каждый символ занимает
   2 байта (16 бит). Для строки из 11 символов это даёт 22 байта памяти, только для хранения символов. Это привело к
   значительному потреблению памяти:

   <p>
       <img src="assets/images/img_strings.png" alt="img_strings.png" style="width: 80%; height: auto;">
   </p>

2. Для оптимизации была применена конвертация строк в значения типа `Long`. Переменная типа `long` занимает всего 8
   байт, что почти в 3 раза экономичнее, чем строковое представление из 11 символов. Это значительно снизило потребление
   памяти:

   <p>
       <img src="assets/images/img_longs.png" alt="img_longs.png" style="width: 80%; height: auto;">
   </p>

## Репозиторий

Исходный код задания доступен в [GitHub репозитории](https://github.com/StarkovAleksandr1992/test-task-uno-soft).

## Запуск программы

Для запуска программы используйте следующие команды:

1. Сборка исполняемого jar файла

```bash
mvn clean package
```

2. Переход в директорию target

```bash
cd target
```

3. Загрузка тестового файла из репозитория

```bash
wget https://github.com/PeacockTeam/new-job/releases/download/v1.0/lng-4.txt.gz
```

4. Разархивация тестового файла

```bash
gunzip -c lng-4.txt.gz > тестовый-файл.txt
```

5. Запуск программы, файл с результатом output.txt

```bash
java -Xmx1G -jar uno-soft-task.jar тестовый-файл.txt
```

## Дополнительные материалы

- [Теория непересекающихся множеств](https://ru.wikipedia.org/wiki/%D0%9D%D0%B5%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D0%B5%D0%BA%D0%B0%D1%8E%D1%89%D0%B8%D0%B5%D1%81%D1%8F_%D0%BC%D0%BD%D0%BE%D0%B6%D0%B5%D1%81%D1%82%D0%B2%D0%B0)
- [Система непересекающихся множеств](https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D0%BD%D0%B5%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D0%B5%D0%BA%D0%B0%D1%8E%D1%89%D0%B8%D1%85%D1%81%D1%8F_%D0%BC%D0%BD%D0%BE%D0%B6%D0%B5%D1%81%D1%82%D0%B2)
- [Применение системы непересекающихся множеств](https://habr.com/ru/articles/104772/)